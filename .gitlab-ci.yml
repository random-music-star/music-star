stages:
  - deploy

deploy-frontend:
  stage: deploy
  only:
    - FE
  tags:
    - prod
  script:
    - cd ~/S12P21A202
    - git fetch origin FE
    - git reset --hard origin/FE
    - cd FE
    - docker stop nextjs-app || true
    - docker rm nextjs-app || true
    - docker build -t nextjs-app .
    - docker run -d -p 3000:3000 --restart always --name nextjs-app nextjs-app
    - docker ps | grep nextjs-app
