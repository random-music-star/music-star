stages:
  - deploy

deploy-frontend:
  stage: deploy
  tags:
    - prod
  only:
    - FE
  script:
    - echo "Starting direct deployment"
    - cd $CI_PROJECT_DIR
    - git checkout FE
    - git pull origin FE
    - cd FE
    - echo "Building and deploying Docker container"
    - docker stop nextjs-app || true
    - docker rm nextjs-app || true
    - docker build -t nextjs-app .
    - docker run -d -p 3000:3000 --restart always --name nextjs-app nextjs-app
    - echo "Deployment completed successfully"
    - docker ps | grep nextjs-app
